events:
  # Gate Events
  - name: quality.gate.started
    description: A quality gate check has started
    payload:
      type: object
      properties:
        gate:
          type: string
        iteration:
          type: integer
        timestamp:
          type: string
          format: date-time
      required: [gate, iteration]
    emitters: [phase-quality, gate-runner]
    subscribers: [metrics-logger]

  - name: quality.gate.passed
    description: A quality gate check has passed
    payload:
      type: object
      properties:
        gate:
          type: string
        value: {}
        threshold: {}
        duration:
          type: integer
      required: [gate]
    emitters: [phase-quality, gate-runner]
    subscribers: [checkpoint, metrics-logger, state-manager]

  - name: quality.gate.failed
    description: A quality gate check has failed
    payload:
      type: object
      properties:
        gate:
          type: string
        value: {}
        threshold: {}
        error:
          type: string
        attempts:
          type: integer
        canAutoFix:
          type: boolean
      required: [gate, error]
    emitters: [phase-quality, gate-runner]
    subscribers: [evaluator-optimizer, decision-logger, queue-manager]

  - name: quality.gate.retry
    description: A quality gate is being retried after fix
    payload:
      type: object
      properties:
        gate:
          type: string
        attempt:
          type: integer
        maxAttempts:
          type: integer
        previousValue: {}
        fix:
          type: object
          properties:
            type:
              type: string
            description:
              type: string
      required: [gate, attempt]
    emitters: [evaluator-optimizer]
    subscribers: [metrics-logger, state-manager]

  - name: quality.gate.skipped
    description: A quality gate was skipped
    payload:
      type: object
      properties:
        gate:
          type: string
        reason:
          type: string
      required: [gate, reason]
    emitters: [phase-quality, gate-runner]
    subscribers: [metrics-logger]

  # Optimization Events
  - name: optimization.cycle.started
    description: An evaluator-optimizer cycle has started
    payload:
      type: object
      properties:
        target:
          type: string
        initialScore:
          type: number
        targetScore:
          type: number
      required: [target]
    emitters: [evaluator-optimizer]
    subscribers: [metrics-logger]

  - name: optimization.cycle.complete
    description: An evaluator-optimizer cycle has completed
    payload:
      type: object
      properties:
        target:
          type: string
        success:
          type: boolean
        iterations:
          type: integer
        initialScore:
          type: number
        finalScore:
          type: number
        improvements:
          type: array
          items:
            type: string
      required: [target, success, iterations]
    emitters: [evaluator-optimizer]
    subscribers: [metrics-logger, decision-logger]

  # Overall Quality Events
  - name: quality.assessment.complete
    description: Full quality assessment is complete
    payload:
      type: object
      properties:
        passed:
          type: integer
        failed:
          type: integer
        skipped:
          type: integer
        allPassing:
          type: boolean
        blockers:
          type: array
          items:
            type: string
      required: [passed, failed, allPassing]
    emitters: [phase-quality]
    subscribers: [phase-evaluate, metrics-logger]
