# TypeScript/React Project Profile
# Loaded when TypeScript or React project detected

name: typescript
version: "1.0.0"
description: Profile for TypeScript and React projects

# Detection patterns
detect:
  files:
    - "tsconfig.json"
    - "package.json"  # with typescript or react dependency
  patterns:
    - "**/*.ts"
    - "**/*.tsx"
    - "**/*.jsx"
  exclude:
    - "**/node_modules/**"
    - "**/dist/**"
    - "**/build/**"

# Subtypes for more specific handling
subtypes:
  react:
    detect:
      - "**/*.tsx"
      - "**/*.jsx"
    patterns:
      - react-component
      - react-hooks

  node:
    detect:
      - "src/index.ts"
      - "src/server.ts"
    patterns:
      - node-project-structure

  nextjs:
    detect:
      - "next.config.js"
      - "next.config.mjs"
    patterns:
      - nextjs-conventions

# Tool preferences
tools:
  package_manager:
    - pnpm
    - npm
    - yarn
    - bun

  lint:
    - eslint
    - biome

  format:
    - prettier
    - biome format

  type_check:
    - tsc --noEmit

  test:
    - vitest
    - jest

  build:
    - npm run build
    - tsc

# Quality thresholds
thresholds:
  test_coverage: 80
  new_code_coverage: 90
  max_complexity: 10

# Patterns to apply
patterns:
  - typescript-conventions
  - error-handling
  - api-patterns

# Rules to load
rules:
  - typescript-best-practices
  - react-best-practices  # if React subtype
  - security

# Common commands
commands:
  run_tests: "npm test"
  lint: "npm run lint"
  format: "npm run format"
  type_check: "tsc --noEmit"
  install: "npm install"
  dev: "npm run dev"
  build: "npm run build"

# File conventions
conventions:
  test_files: "*.test.ts, *.test.tsx, *.spec.ts"
  test_directory: "__tests__/ or tests/ or *.test.ts alongside"
  source_directory: "src/"
  config_file: "package.json"
  components: "src/components/"
