# Rust Project Profile
# Loaded when Cargo.toml detected

name: rust
version: "1.0"

# How to detect this profile
detection:
  files:
    - Cargo.toml
    - Cargo.lock
  patterns:
    - "**/*.rs"

# Quality gate commands
gates:
  lint:
    command: cargo clippy -- -D warnings
    description: Check code quality with clippy

  test:
    command: cargo test
    verbose_command: cargo test -- --nocapture
    description: Run test suite

  build:
    command: cargo build
    release_command: cargo build --release
    description: Build project

  format:
    command: cargo fmt
    check_command: cargo fmt -- --check
    description: Format Rust code

# Thresholds
thresholds:
  coverage: 80
  complexity: 15

# Common patterns in Rust projects
patterns:
  - name: workspace
    indicator: "[workspace]"

  - name: binary
    indicator: src/main.rs

  - name: library
    indicator: src/lib.rs

  - name: actix-web
    indicator: actix-web

  - name: tokio
    indicator: tokio

  - name: axum
    indicator: axum

# Conventions
conventions:
  - Use rustfmt for consistent formatting
  - Prefer Result<T, E> over panic for error handling
  - Use clippy lints to catch common mistakes
  - Derive traits when possible (Debug, Clone, etc.)
  - Use modules to organize code

# File templates
templates:
  test: |
    #[cfg(test)]
    mod tests {
        use super::*;

        #[test]
        fn test_{function}() {
            // Arrange

            // Act

            // Assert
            assert!(true);
        }
    }

# Ignore patterns for search
ignore:
  - target
  - .git
  - Cargo.lock
