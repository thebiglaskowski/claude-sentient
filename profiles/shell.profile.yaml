# Shell/PowerShell Project Profile
# Loaded when shell scripts detected

name: shell
version: "1.0.0"
description: Profile for Bash, PowerShell, and shell script projects

# Detection patterns
detect:
  files:
    - "*.sh"
    - "*.bash"
    - "*.ps1"
    - "*.psm1"
    - "*.psd1"
  patterns:
    - "**/*.sh"
    - "**/*.bash"
    - "**/*.ps1"
    - "scripts/**"
    - "bin/**"

# Subtypes
subtypes:
  bash:
    detect:
      - "**/*.sh"
      - "**/*.bash"
    tools:
      lint: shellcheck
      format: shfmt
      test: bats

  powershell:
    detect:
      - "**/*.ps1"
      - "**/*.psm1"
    tools:
      lint: PSScriptAnalyzer
      format: Invoke-Formatter
      test: Pester

# Tool preferences
tools:
  lint:
    - shellcheck  # bash
    - PSScriptAnalyzer  # powershell

  format:
    - shfmt  # bash

  test:
    - bats  # bash
    - Pester  # powershell

# Quality thresholds
thresholds:
  shellcheck_severity: warning  # error, warning, info, style
  max_line_length: 120

# Patterns to apply
patterns:
  - shell-script-structure
  - error-handling-shell

# Rules to load
rules:
  - shell-best-practices
  - security

# Common commands
commands:
  lint_bash: "shellcheck **/*.sh"
  format_bash: "shfmt -w -i 2 **/*.sh"
  test_bash: "bats tests/"
  lint_ps: "Invoke-ScriptAnalyzer -Path . -Recurse"
  test_ps: "Invoke-Pester"

# File conventions
conventions:
  bash_shebang: "#!/usr/bin/env bash"
  strict_mode: "set -euo pipefail"
  lib_directory: "lib/"
  bin_directory: "bin/"
