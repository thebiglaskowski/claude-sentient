{
  "quality_gates": {
    "enabled": true,
    "strict_mode": true,
    "thresholds": {
      "coverage_overall": 80,
      "coverage_new_code": 90,
      "lint_errors": 0,
      "lint_warnings": 0,
      "type_errors": 0,
      "security_s0": 0,
      "security_s1": 0,
      "tests_failing": 0,
      "tests_skipped_pct": 5
    },
    "gates": {
      "preflight": { "enabled": true, "blocking": true },
      "lint": { "enabled": true, "blocking": true },
      "type": { "enabled": true, "blocking": true },
      "unit_test": { "enabled": true, "blocking": true },
      "integration": { "enabled": true, "blocking": true },
      "security": { "enabled": true, "blocking": true },
      "performance": { "enabled": true, "blocking": true },
      "browser": { "enabled": "auto", "blocking": true },
      "a11y": { "enabled": "auto", "blocking": true },
      "docs": { "enabled": true, "blocking": true },
      "modern": { "enabled": true, "blocking": true },
      "work_queue": { "enabled": true, "blocking": true },
      "known_issues": { "enabled": true, "blocking": true },
      "git_state": { "enabled": true, "blocking": true },
      "dod": { "enabled": true, "blocking": true }
    }
  },
  "permissions": {
    "allow": [
      "Read",
      "Write",
      "Edit",
      "Glob",
      "Grep",
      "WebFetch",
      "WebSearch",
      "Task",
      "Bash(*)",
      "mcp__*"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(rm -rf ~)",
      "Bash(rm -rf $HOME)",
      "Bash(git push --force *)",
      "Bash(git push -f *)",
      "Bash(git reset --hard *)",
      "Bash(git clean -fd *)",
      "Bash(sudo rm *)",
      "Bash(chmod 777 *)",
      "Bash(npm publish *)",
      "Bash(curl * | *sh)",
      "Bash(wget * | *sh)",
      "Bash(:(){ :|:& };:)"
    ],
    "defaultMode": "allowEdits"
  },
  "hooks": {
    "Setup": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/hooks/setup-init.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/hooks/session-start.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/context-injector.py",
            "timeout": 5
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "tool == \"Bash\"",
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/bash-auto-approve.py",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "tool == \"Write\" || tool == \"Edit\" || tool == \"NotebookEdit\"",
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/file-validator.py",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"git push --force\"",
        "hooks": [
          {
            "type": "command",
            "command": "echo '[Hook] BLOCKED: Force push requires explicit confirmation' >&2 && exit 1"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "tool == \"Edit\" || tool == \"Write\"",
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/hooks/post-edit.sh",
            "timeout": 15
          }
        ]
      }
    ],
    "PostToolUseFailure": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/error-recovery.py",
            "timeout": 10
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/agent-tracker.py",
            "timeout": 5
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/agent-synthesizer.py",
            "timeout": 10
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/hooks/pre-compact.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python .claude/hooks/dod-verifier.py",
            "timeout": 15
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/hooks/session-end.sh",
            "timeout": 15
          }
        ]
      }
    ]
  },
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@upstash/context7-mcp@latest"],
      "env": {}
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"],
      "env": {}
    },
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_TOKEN": "${GITHUB_TOKEN}"
      }
    }
  }
}
